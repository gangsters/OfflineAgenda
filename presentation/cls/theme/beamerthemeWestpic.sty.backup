\usetheme{Rochester}

\RequirePackage{pgf}
% \RequirePackage{tikz}

\pgfdeclareimage[width=1.0\paperwidth]{westpic-header}{westpic-header.jpg}


\beamer@headheight=0.157\paperwidth

\definecolor{westpicred}{HTML}{E77F68}
\definecolor{westpicgray}{HTML}{8484B3}
\definecolor{westpicblue}{HTML}{3482b4}
\definecolor{westpiclightblue}{HTML}{3636A5}
\definecolor{westpiclightgray}{HTML}{DFDFDF}
\definecolor{westpicbrown}{HTML}{9D642B}
\definecolor{westpicgreen}{HTML}{6DB265}

\setbeamercolor*{Title bar}{fg=white}
\setbeamercolor*{Location bar}{fg=westpiclightblue}
\setbeamercolor*{frametitle}{parent=Title bar}
\setbeamercolor*{block title}{bg=westpiclightblue,fg=white}
\setbeamercolor*{block body}{bg=westpiclightgray,fg=black}
\setbeamercolor*{normal text}{bg=white,fg=black}
\setbeamercolor*{section in head/foot}{bg=westpicgray,fg=black}

\setbeamercolor*{block title alerted}{bg=westpicred,fg=white}
\setbeamercolor*{block title example}{bg=westpicgreen,fg=white}

\setbeamercolor{alerted text}{fg=westpicred}
\setbeamercolor*{example text}{fg=westpicgreen}

\usecolortheme[named=westpiclightblue]{structure}

\setbeamerfont{section in head/foot}{size=\tiny,series=\normalfont}
\setbeamerfont{frametitle}{size=\Large}

% SLIDE DE TITRE
\setbeamertemplate{frametitle}
{
  \vskip-0.5\beamer@headheight
  %\vskip-\baselineskip
  %\vskip-0.2cm
  \begin{centering}
   %\hskip0.7cm
   \usebeamerfont*{frametitle}\textbf{\insertframetitle}
  \par
  \end{centering}
  \vskip-0.10em
  \hskip0.7cm\usebeamerfont*{framesubtitle}\insertframesubtitle
}

% EN-TETE
\setbeamertemplate{headline}
{
  \pgfuseimage{westpic-header}
  \vskip -1.76cm
  \linethickness{0.0pt}

  \framelatex{
  \begin{beamercolorbox}[wd=\paperwidth,ht=0.3\beamer@headheight]{Navigation bar}
    \usebeamerfont{section in head/foot}
    \insertsectionnavigationhorizontal{0pt}{}{} 
  \end{beamercolorbox}}
\vskip -0.16cm
  \framelatex{
  \begin{beamercolorbox}[wd=\paperwidth,ht=0.7\beamer@headheight]{Title bar}
  \end{beamercolorbox}}
}

% PIED DE PAGE
\setbeamertemplate{footline}
{
  \begin{picture}(0,0)
    \put(-395,-15){\includegraphics[width=330mm , height=15mm]{Volutes3bis.pdf}}
  \end{picture}
    \begin{picture}(0,0)
    \put(300,0){\includegraphics[width=22mm , height=6mm]{logo.jpg}}
  \end{picture}
  \begin{beamercolorbox}[leftskip=.3cm,wd=0.5\paperwidth,ht=0.3\beamer@headheight,sep=0.1cm]{Location bar}
    \usebeamerfont{section in head/foot}
    \insertshortauthor~|~\insertshorttitle
  \end{beamercolorbox}
  \begin{beamercolorbox}[ht=0.3\beamer@headheight,sep=0.1cm]{Location bar}
    \insertframenumber/44
  \end{beamercolorbox}
}



\newenvironment{changemargin}[2]{%
  \begin{list}{}{
    \setlength{\topsep}{0pt}
    \setlength{\leftmargin}{#1}
    \setlength{\rightmargin}{#2}
    \setlength{\listparindent}{\parindent}
    \setlength{\itemindent}{\parindent}
    \setlength{\parsep}{\parskip}
  }
  \item[]}{\end{list}}

\setbeamertemplate{caption}{\insertcaption}

\newcommand{\backupbegin}{
   \newcounter{framenumberappendix}
   \setcounter{framenumberappendix}{\value{framenumber}}
}
\newcommand{\backupend}{
   \addtocounter{framenumberappendix}{-\value{framenumber}}
   \addtocounter{framenumber}{\value{framenumberappendix}} 
}

% Ajout de block de taille ajustable
% http://www.latex-community.org/forum/viewtopic.php?f=4&t=2251
\newenvironment<>{varblock}[2][\textwidth]{%
  \setlength{\textwidth}{#1}
  \begin{actionenv}#3%
    \def\insertblocktitle{#2}%
    \par%
    \usebeamertemplate{block begin}}
  {\par%
    \usebeamertemplate{block end}%
  \end{actionenv}}

\setbeamercovered{invisible}